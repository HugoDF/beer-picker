<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Beer Picker</title>
        <meta name="description" content="Beer Picker will help you pick a bog standard supermarket beer, for those moments when you  don't have the time to trawl through the identical shit beers in the cornershop or supermarket">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable= 0">
        <link rel="stylesheet" href="/app.css">
        <script type="text/javascript" async src="//platform.twitter.com/widgets.js"></script>
        <link href='https://fonts.googleapis.com/css?family=Raleway:400,200' rel='stylesheet' type='text/css'>
        <!--<script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-68164017-1', 'auto');
        ga('send', 'pageview');

      </script>-->
    </head>
    <body>
      <div id="fb-root"></div>
      <script>(function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.4&appId=1506956176285209";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));</script>
      <div class="navbar">
        <div class="container">
          <a href="/"class="logo">
          Beer Picker
          </a>
          <div class="right">
            <a class="feedback-button button" target="_blank" href="http://goo.gl/forms/y00M7n9Zwd">Add my beers</a>
            <a class="open-share-modal link white" href="javascript:return(0)">Share</a>
          </div>
        </div>
      </div>
      <div class="feedback-modal hidden">
        <div class="feedback-modal-inner">
          <h3 class="feedback-title">Get in touch</h3>
          <div class="row center">
            <a href="mailto:hdifrancesco@gmail.com" class="button">Email</a>
            <% tweet_text = "@hugo__df"%>
            <a target="_blank" href=<%="http://twitter.com/intent/tweet?text=#{CGI::escape tweet_text}"%> class="button">Twitter</a>
          </div>
        </div>
      </div>
      <div class="share-modal hidden">
        <div class="share-modal-inner">
          <h3 class="share-title">Share my Beer Picking</h3>
          <% tweet_text = "#beer picker: "%>
          <% url = "http://beerpicker.herokuapp.com"%>
          <a target="_blank" href=<%="http://twitter.com/intent/tweet?text=#{CGI::escape tweet_text}&url=#{CGI::escape url}"%> class="button share-button">Twitter</a>
          <!--<a target="_blank" href="http://www.facebook.com/sharer/sharer.php?u=beerpicker.herokuapp.com" class="button">Facebook</a>-->
          <a href="mailto:?subject=I got a random beer picked out&amp;body=Check out http://beerpicker.herokuapp.com. They'll help you pick your beer at the supermarket ;). I ended up with one that wasn't too horrible" class="button share-button">Email</a>
          <div class="fb-like" data-href="https://facebook.com/beerpicker" data-layout="box_count" data-action="like" data-show-faces="true" data-share="true"></div>
        </div>
      </div>
      <div class="container">
        <div class="page">
        <!--<div style="float:left; height: 300px; width: 100px; background-size: contain;background-image: url('/beer-bottle.png');">
          <div id="content"></div>
        </div>-->
        <%= yield %>
        </div>
      </div>
      <!-- <div id="content"></div> -->
      <div class="ack">
        <!--<a href='http://www.freepik.com/free-vector/beer-glass-illustration_757103.htm'>Beer image designed by Freepik</a>-->
        <a href="http://twitter.com/intent/follow?user_id=2603804084">@hugo__df</a>
        <a target="_blank" href="http://hugodf.github.io">&copy; Hugo</a>
      </div>
      <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
      <script src="https://www.google.com/jsapi"></script>
      <script type="text/javascript">

        google.load('search', '1');

        var imageSearch;

        function searchComplete() {
          // Check that we got results
          if (imageSearch.results && imageSearch.results.length > 0) {

            // Grab our content div, clear it.
            var contentDiv = document.getElementById('content');
            contentDiv.innerHTML = '';

            // Loop through our results, printing them to the page.
            var results = imageSearch.results;
            // for (var i = 0; i < results.length; i++) {
            for (var i = 0; i < 1; i++) {
              // For each result write it's title and image to the screen
              var result = results[i];
              var imgContainer = document.createElement('a');
              imgContainer.setAttribute('href', result.tbUrl);
              console.log(result);
              // var title = document.createElement('div');

              // We use titleNoFormatting so that no HTML tags are left in the
              // title
              // title.innerHTML = result.titleNoFormatting;
              var newImg = document.createElement('img');

              // There is also a result.url property which has the escaped version
              newImg.src=result.tbUrl;
              // imgContainer.appendChild(title);
              imgContainer.appendChild(newImg);

              // Put our title + image in the content
              contentDiv.appendChild(imgContainer);
            }

            // Now add links to additional pages of search results.
            // addPaginationLinks(imageSearch);
          }
        }

        function OnLoad() {

          // Create an Image Search instance.
          imageSearch = new google.search.ImageSearch();

          // Set searchComplete as the callback function when a search is
          // complete.  The imageSearch object will have results in it.
          imageSearch.setSearchCompleteCallback(this, searchComplete, null);

          // Find me a beautiful car.
          imageSearch.execute('<%= "#{@beer["title"]} beer logo -bottle" %>');

          // Include the required Google branding
          // google.search.Search.getBranding('branding');
        }
        google.setOnLoadCallback(OnLoad);
      </script> -->
      <script>
        $(function(){
          $('.feedback-button').on('click', function(){
            $('.feedback-modal').toggleClass('hidden');
          });
          $('.feedback-modal').on('click', function(){
            $('.feedback-modal').toggleClass('hidden');
          });
          $('.feedback-modal-inner').on('click', function(e){
            e.stopPropagation();
          });
          $('.open-share-modal').on('click', function(){
            $('.share-modal').toggleClass('hidden');
          });
          $('.share-modal').on('click', function(){
            $('.share-modal').toggleClass('hidden');
          });
          $('.share-modal-inner').on('click', function(e){
            e.stopPropagation();
          });
        });
      </script>
    </body>
</html>
